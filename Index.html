<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ржЯрзЗрж▓рж┐ржЧрзНрз░рж╛ржо ржмрж╛ржЬрж╛рж░ тАФ рж╕ржорзНржкрзВрж░рзНржг</title>
<style>
  /* RESET */
  *{box-sizing:border-box}
  body{margin:0;font-family:Arial,Helvetica,sans-serif;background:#ffffff;overflow-x:hidden;color:#222}
  /* BACKGROUND BLOBS + STRIPES */
  .bg-layer{position:fixed;inset:0;pointer-events:none;z-index:0}
  .blob{
    position:absolute;border-radius:50%;filter:blur(48px);opacity:0.22;mix-blend-mode:screen;
    will-change:transform;transform-origin:center;
  }
  .blob.a{width:420px;height:420px;background:linear-gradient(135deg,#c8f6ff 0%,#bfe7ff 50%,#ffd6e0 100%);left:-140px;top:-120px;animation:floatA 20s ease-in-out infinite}
  .blob.b{width:520px;height:520px;background:linear-gradient(135deg,#ffe6f0 0%,#ffd7b5 40%,#ffd1d1 100%);right:-200px;top:40px;animation:floatB 24s ease-in-out infinite}
  .blob.c{width:380px;height:380px;background:linear-gradient(135deg,#e8fff2 0%,#c7f7e6 50%,#d6f1ff 100%);left:50%;transform:translateX(-50%);bottom:-160px;animation:floatC 22s ease-in-out infinite;opacity:0.14}
  .stripes{position:absolute;inset:0;background-image:linear-gradient(135deg, rgba(3,102,214,0.02) 25%, rgba(255,117,140,0.015) 25%, rgba(255,117,140,0.015) 50%, rgba(3,102,214,0.02) 50%);background-size:60px 60px;opacity:0.6;animation:moveStripes 30s linear infinite}
  @keyframes floatA{0%{transform:translate(0,0) scale(1)}50%{transform:translate(24px,26px) scale(1.03)}100%{transform:translate(0,0) scale(1)}}
  @keyframes floatB{0%{transform:translate(0,0) scale(1)}50%{transform:translate(-40px,-18px) scale(1.04)}100%{transform:translate(0,0) scale(1)}}
  @keyframes floatC{0%{transform:translate(0,0) scale(1)}50%{transform:translate(18px,34px) scale(1.02)}100%{transform:translate(0,0) scale(1)}}
  @keyframes moveStripes{0%{background-position:0 0}100%{background-position:360px 360px}}

  /* APP WRAPPER & CARDS */
  #appWrap{position:relative;z-index:2;padding:18px;}
  .card{max-width:720px;margin:18px auto;background:linear-gradient(145deg,#ffffff,#f8fbff);padding:26px;border-radius:18px;box-shadow:0 12px 30px rgba(2,6,23,0.06)}
  .center{text-align:center}
  h1{margin:0 0 8px 0;font-size:24px}
  .badge{width:110px;height:110px;border-radius:50%;background:#fafafa;display:inline-flex;align-items:center;justify-content:center;font-weight:700;font-size:28px;color:#333;box-shadow:0 6px 18px rgba(0,0,0,0.06)}
  p.lead{color:#555;margin-top:12px}

  /* userCounter box */
  .userCounterBox{display:inline-block;padding:12px 18px;border-radius:12px;background:linear-gradient(135deg,#00c6ff,#0072ff);color:#fff;font-weight:700;box-shadow:0 8px 22px rgba(0,0,0,0.08);margin-top:14px}

  /* UI buttons */
  .btn{width:100%;padding:14px;border-radius:14px;color:#fff;border:none;font-weight:700;cursor:pointer;margin:12px 0}
  .btn.blue{background:linear-gradient(135deg,#00c6ff,#0072ff)}
  .btn.pink{background:linear-gradient(135deg,#ff7eb3,#ff758c)}
  .btn.ghost{background:#f0f0f0;color:#333}
  .smallBtn{padding:8px 12px;border-radius:10px}

  /* list / review items */
  .listItem{display:flex;gap:12px;align-items:center;margin-bottom:12px;background:#fbfbff;padding:12px;border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,0.03)}
  .avatar{width:50px;height:50px;border-radius:50%;object-fit:cover}

  /* inputs */
  input[type="text"], input[type="tel"], input[type="number"]{width:100%;padding:10px;border-radius:10px;border:1px solid #e6eef8;margin:6px 0}

  /* small responsive tweaks */
  @media (max-width:480px){
    .card{padding:18px;border-radius:14px}
    .badge{width:90px;height:90px;font-size:22px}
  }

  /* respect reduced motion */
  @media (prefers-reduced-motion: reduce){
    .blob,.stripes{animation:none}
  }
</style>
</head>
<body>

  <div class="bg-layer" aria-hidden="true">
    <div class="blob a"></div>
    <div class="blob b"></div>
    <div class="blob c"></div>
    <div class="stripes"></div>
  </div>

  <div id="appWrap">
    <div id="tgMarket" class="card center">
      <h1>ржЯрзЗрж▓рж┐ржЧрзНрз░рж╛ржо ржмрж╛ржЬрж╛рж░ ЁЯЪАЁЯТм</h1>
      <div class="badge">18+</div>
      <p class="lead">ржПржЦрж╛ржирзЗ ржЖржкржирж┐ ржЯрзЗрж▓рж┐ржЧрзНрз░рж╛ржо ржЧрзНрж░рзБржк ржУ рж╕рзЗрж▓ рж╕рж╣ржЬрзЗржЗ ржжрзЗржЦрждрзЗ ржкрж╛ржмрзЗржиред</p>

      <div class="userCounterBox">ЁЯСе ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА: <span id="userCount">10,000</span>+</div>

      <div style="max-width:560px;margin:18px auto;">
        <p style="color:#666;margin:6px 0;text-align:left">ЁЯСЙ ржмрж╛ржЯржи рзз: рззрзо+ рж╕рзЗрж▓ ржУ ржЕржлрж╛рж░</p>
        <button id="btnOffers" class="btn pink">ЁЯТ░ рззрзо+ рж╕рзЗрж▓ ржУ ржЕржлрж╛рж░</button>
        
        <p style="color:#666;margin:6px 0;text-align:left">ЁЯСЙ ржмрж╛ржЯржи рзи: рж░рж┐ржпрж╝рзЗрж▓рж┐рж╕рзНржЯрж┐ржХ рж░рж┐ржнрж┐ржЙ ржжрзЗржЦрзБржи</p>
        <button id="btnReviews" class="btn blue">ЁЯФЧ рж░рж┐ржнрж┐ржЙ ржжрзЗржЦрзБржи</button>
      </div>

      <div style="max-width:560px;margin:0 auto;">
        <div style="background:#fafafa;border-radius:12px;padding:12px;margin-top:12px;box-shadow:0 4px 15px rgba(0,0,0,0.04);text-align:left">
          <h3 style="margin:0 0 6px 0">ржЖржорж╛ржжрзЗрж░ рж╕ржорзНржкрж░рзНржХрзЗ</h3>
          <p style="margin:0;color:#555;font-size:14px">ржЯрзЗрж▓рж┐ржЧрзНрз░рж╛ржо ржмрж╛ржЬрж╛рж░ рж╣рж▓рзЛ ржПржХржЯрж┐ ржкрзНрж▓рзНржпрж╛ржЯржлрж░рзНржо ржпрзЗржЦрж╛ржирзЗ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАрж░рж╛ ржмрж┐ржнрж┐ржирзНржи ржЯрзЗрж▓рж┐ржЧрзНрз░рж╛ржо ржЧрзНрж░рзБржк, рж╕рзЗрж▓ ржУ ржЕржлрж╛рж░ ржжрзЗржЦрзЗржиред</p>
        </div>

        <div style="background:#fafafa;border-radius:12px;padding:12px;margin-top:12px;box-shadow:0 4px 15px rgba(0,0,0,0.04);text-align:left">
          <h3 style="margin:0 0 6px 0">рж╕рж╛ржкрзЛрж░рзНржЯ</h3>
          <p style="margin:0;color:#555;font-size:14px">
            ЁЯТм WhatsApp: <a href="#" target="_blank">click here</a><br>
            тЬЙя╕П Email: <a href="mailto:support@example.com">support@example.com</a><br>
            ЁЯУ▒ Telegram: <a href="#" target="_blank">click here</a>
          </p>
        </div>
      </div>

      <div style="color:#777;font-size:13px;margin-top:14px;border-top:1px dashed #e2e8f0;padding-top:12px;">
        ┬й 2025 ржЯрзЗрж▓рж┐ржЧрзНрз░рж╛ржо ржмрж╛ржЬрж╛рж░ | рж╕ржорж╕рзНржд ржЕржзрж┐ржХрж╛рж░ рж╕ржВрж░ржХрзНрж╖рж┐рждред
      </div>
    </div>

    <div id="slide1" class="card" style="display:none;">
      <h2 style="text-align:center;color:#0b63d6;margin:6px 0 16px 0;">рж░рж┐ржпрж╝рзЗрж▓рж┐рж╕рзНржЯрж┐ржХ рж░рж┐ржнрж┐ржЙ</h2>
      <div id="slide1Content"></div>
      <div style="text-align:center"><button id="back1" class="smallBtn btn ghost">тмЕя╕П Back</button></div>
    </div>

    <div id="slide2" class="card" style="display:none;">
      <h2 style="text-align:center;color:#0b63d6;margin:6px 0 12px 0;">рззрзо+ рж╕рзЗрж▓ ржУ ржЕржлрж╛рж░</h2>
      <input id="searchInput" placeholder="ржЧрзНрж░рзБржк ржЕржирзБрж╕ржирзНржзрж╛ржи ржХрж░рзБржи..." />
      <div id="slide2Content" style="margin-top:12px"></div>
      <div style="text-align:center"><button id="back2" class="smallBtn btn ghost">тмЕя╕П Back</button></div>
    </div>

    <div id="paymentSlide" class="card" style="display:none;">
      <h2 style="text-align:center;color:#0b63d6;margin:6px 0 12px 0;">ЁЯТ│ ржкрзЗржорзЗржирзНржЯ ржЗржирзНржЯрж╛рж░ржлрзЗрж╕</h2>
      <div style="font-size:14px;color:#333;margin-top:6px;line-height:1.5;">
        +8801769856324<br>Bkash / Nagad тАФ ржирж╛ржорзНржмрж╛рж░рзЗ рж╕рзЗржирзНржб ржорж╛ржирж┐ ржХрж░рзЗ ржирж┐ржЪрзЗрж░ ржлрж░рзНржо ржкрзВрж░ржг ржХрж░рзЗ рж╕рж╛ржмржорж┐ржЯ ржХрж░рзЛред
      </div>

      <p>ржЧрзНрж░рзБржк: <b id="payGroupName">тАФ</b></p>
      <p>ржкрзНрж░рж╛ржЗрж╕: <b id="payGroupPrice">тАФ</b> ржЯрж╛ржХрж╛</p>

      <form id="paymentForm">
        <input type="text" id="pay_name" placeholder="ржЖржкржирж╛рж░ ржирж╛ржо" required />
        <input type="tel" id="pay_phone" placeholder="ржорзЛржмрж╛ржЗрж▓ ржиржорзНржмрж░ (01XXXXXXXXX)" required />
        <input type="number" id="pay_amount" placeholder="ржЯрж╛ржХрж╛рж░ ржкрж░рж┐ржорж╛ржг" required />
        <input type="text" id="pay_trx" placeholder="ржЯрзНрж░рж╛ржиржЬрзЗржХрж╢ржи ржЖржЗржбрж┐" required />
        <div style="text-align:center;margin-top:10px">
          <button type="submit" class="btn blue">тЬЕ Submit Payment</button>
        </div>
      </form>

      <div style="text-align:center;margin-top:10px"><button id="back3" class="smallBtn btn ghost">тмЕя╕П Back</button></div>
    </div>

    <div id="successSlide" class="card" style="display:none;text-align:center;">
      <h2 style="color:#0b63d6;margin:6px 0 16px 0;">ЁЯОЙ ржЖржмрзЗржжржи рж╕ржорзНржкржирзНржи!</h2>
      <p id="successText" style="font-size:16px;color:#0b63d6;margin-top:10px;">рждрзЛржорж╛рж░ ржЖржмрзЗржжржи ржЧрзНрж░рж╣ржг ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ тАФ ржпрж╛ржЪрж╛ржЗрзЯрзЗрж░ ржкрж░ рж▓рж┐ржВржХ ржкрзНрж░рзЗрж░ржг ржХрж░рж╛ рж╣ржмрзЗред</p>
      <div style="margin-top:12px"><button id="back4" class="smallBtn btn ghost">ЁЯПа Back to Home</button></div>
    </div>

  </div>

<script>
/* ==========================
   CONFIG: ржПржЦрж╛ржирзЗ рждрзЛржорж╛рж░ рж╕рзЗржЯрж┐ржВрж╕ ржмрж╕рж╛ржУ
   ==========================
   - PROXY_URL (ржкрзНрж░рж╕рзНрждрж╛ржмрж┐ржд): ржпржжрж┐ рждрзБржорж┐ Google Apps Script ржжрж┐рзЯрзЗржЗ ржкрж╛ржарж╛рждрзЗ ржЪрж╛ржУ тАФ рж╕рзЗржЗ ржУрзЯрзЗржм ржЕрзНржпрж╛ржкрзЗрж░ URL ржмрж╕рж╛ржУред
   - BOT_TOKEN + CHAT_ID: рж╕рж░рж╛рж╕рж░рж┐ ржЯрзЗрж▓рж┐ржЧрзНрж░рж╛ржо ржкрж╛ржарж╛ржирзЛрж░ ржЬржирзНржп (CORS рж╕ржорж╕рзНржпрж╛рж░ ржЭрзБржБржХрж┐ ржЖржЫрзЗ)ред
*/
const PROXY_URL = ""; // ржЙржжрж╛рж╣рж░ржг: "https://script.google.com/macros/s/AKfy.../exec"
const BOT_TOKEN  = "8373393733:AAFG3CmRbUNlg3mbZkxuOvpN6ZxC4U4iU7U"; // рждрзЛржорж╛рж░ ржмржЯ ржЯрзЛржХрзЗржи
const CHAT_ID    = "8317578721"; // рждрзЛржорж╛рж░ ржЯрзЗрж▓рж┐ржЧрзНрж░рж╛ржо ржЪрзНржпрж╛ржЯ ржЖржЗржбрж┐

/* ==========================
   ржбрж╛ржЯрж╛: рж░рж┐ржнрж┐ржЙ ржУ ржЕржлрж╛рж░ (ржЪрж╛рж╣рж┐рж▓рзЗ рждрзБржорж┐ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рждрзЗ ржкрж╛рж░рзЛ)
   ========================== */
const reviews = [
  {user:"Mr. Rumon", msg:"рж╕рзЗржмрж╛ ржЦрзБржм ржнрж╛рж▓рзЛ! ржПржЦрж╛ржирзЗ ржЕржирзЗржХ рж╕рзБржмрж┐ржзрж╛ ржкрзЗрж▓рж╛ржоред", avatar:"https://i.pravatar.cc/60?img=1"},
  {user:"Md. Rakinul", msg:"ржЧрзНрж░рзБржкржЧрзБрж▓рзЛ ржмрзЗрж╢ ржЖржХрж░рзНрж╖ржгрзАржпрж╝ ржПржмржВ ржирж┐рж░рж╛ржкржжред", avatar:"https://i.pravatar.cc/60?img=2"},
  {user:"Masum", msg:"ржЖржорж┐ ржирждрзБржи рж╕ржжрж╕рзНржп, ржХрж┐ржирзНрждрзБ рж╕ржм ржХрж┐ржЫрзБ рж╕рж╣ржЬрзЗ ржмрзБржЭрждрзЗ ржкрж╛рж░рж▓рж╛ржоред", avatar:"https://i.pravatar.cc/60?img=3"},
  {user:"Rakib lislam", msg:"ржЕржлрж╛рж░ржЧрзБрж▓рзЛ рж╕рждрзНржпрж┐ржЗ ржжрж╛рж░рзБржиред", avatar:"https://i.pravatar.cc/60?img=4"},
  {user:"Monika", msg:"ржорзЛржмрж╛ржЗрж▓ ржерзЗржХрзЗ рж╕ржм ржХрж╛ржЬ ржЦрзБржм рж╕рж╣ржЬред", avatar:"https://i.pravatar.cc/60?img=5"}
];

const slide2Data = [
  {name:"ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо рж╕рзЗрж▓ ЁЯТО", note:"ржЖржЧрзЗ ржжрж╛ржо ржмрзЗрж╢рж┐ ржЫрж┐рж▓, ржПржЦржи ржХржо!", price:150, demoLink:"https://t.me/example_demo_link"},
  {name:"ржлрзНрж▓рзНржпрж╛рж╢ ржбрж┐рж▓ ЁЯФе", note:"рж╕рзАржорж┐ржд рж╕ржорзЯрзЗрж░ ржбрж┐рж╕ржХрж╛ржЙржирзНржЯ", price:120, demoLink:"https://t.me/example_demo_link"},
  {name:"ржлрзНрж░рзЗрж╢ ржЕржлрж╛рж░ ЁЯОп", note:"ржирждрзБржи ржХржирзНржЯрзЗржирзНржЯ ржУ рж╕рзЗржнрж┐ржВрж╕", price:80, demoLink:"https://t.me/example_demo_link"},
  {name:"ржорж╛рж╕рж┐ржХ рж╕рж╛ржмрж╕рзНржХрзНрж░рж┐ржкрж╢ржи", note:"ржкрзНрж░рждрж┐ ржорж╛рж╕рзЗ ржирждрзБржи ржХржирзНржЯрзЗржирзНржЯ", price:200, demoLink:"https://t.me/example_demo_link"},
  {name:"ржЧрзЛрж▓рзНржб ржорзЗржорзНржмрж╛рж░рж╢рж┐ржк", note:"ржмрж┐рж╢рзЗрж╖ ржХржирзНржЯрзЗржирзНржЯ ржУ рж╕рзБржмрж┐ржзрж╛", price:300, demoLink:"https://t.me/example_demo_link"},
  {name:"ржнрж┐ржЖржЗржкрж┐ ржкрзНржпрж╛ржХ", note:"рж╕рзЗрж░рж╛ ржорж╛ржирзЗрж░ ржХржирзНржЯрзЗржирзНржЯ", price:500, demoLink:"https://t.me/example_demo_link"},
  {name:"рж╕рзБржкрж╛рж░ рж╕рзЗржнрж┐ржВрж╕", note:"рж╕рзЗрж░рж╛ ржжрж╛ржорзЗ рж╕рзЗрж░рж╛ ржХржирзНржЯрзЗржирзНржЯ", price:100, demoLink:"https://t.me/example_demo_link"},
  {name:"ржПржХрзНрж╕ржХрзНрж▓рзБрж╕рж┐ржн ржХрж╛рж▓рзЗржХрж╢ржи", note:"рж╢рзБржзрзБржорж╛рждрзНрж░ ржмрж┐рж╢рзЗрж╖ рж╕ржжрж╕рзНржпржжрзЗрж░ ржЬржирзНржп", price:250, demoLink:"https://t.me/example_demo_link"},
  {name:"ржЖрж▓рзНржЯрж┐ржорзЗржЯ ржбрж┐рж▓", note:"рж╕рж╛рж░рж╛ ржмржЫрж░рзЗрж░ рж╕рзЗрж░рж╛ ржЕржлрж╛рж░", price:900, demoLink:"https://t.me/example_demo_link"},
  {name:"ржирждрзБржи ржмржЫрж░рзЗрж░ ржкрзНржпрж╛ржХ", note:"ржиржмржмрж░рзНрж╖рзЗрж░ ржмрж┐рж╢рзЗрж╖ ржкрзНржпрж╛ржХрзЗржЬ", price:180, demoLink:"https://t.me/example_demo_link"},
  {name:"ржмрзНрж▓рзНржпрж╛ржХ ржлрзНрж░рж╛ржЗржбрзЗ ржЕржлрж╛рж░", note:"рж╕рзАржорж┐ржд рж╕ржоржпрж╝рзЗрж░ ржЬржирзНржп", price:70, demoLink:"https://t.me/example_demo_link"},
  {name:"ржбрзЗржЗрж▓рж┐ ржбрж┐рж▓", note:"ржкрзНрж░рждрж┐ржжрж┐ржирзЗрж░ ржЬржирзНржп ржирждрзБржи ржХрж┐ржЫрзБ", price:40, demoLink:"https://t.me/example_demo_link"},
  {name:"ржХрж╛рж╕рзНржЯржо ржкрзНржпрж╛ржХрзЗржЬ", note:"ржЖржкржирж╛рж░ ржкржЫржирзНржж ржорждрзЛ ржХрж╛рж╕рзНржЯржо", price:350, demoLink:"https://t.me/example_demo_link"},
  {name:"рж╕ржкрзНрждрж╛рж╣рж┐ржХ рж╕рж╛ржмрж╕рзНржХрзНрж░рж┐ржкрж╢ржи", note:"рж╕ржкрзНрждрж╛рж╣рзЗ ржирждрзБржи ржХржирзНржЯрзЗржирзНржЯ", price:60, demoLink:"https://t.me/example_demo_link"},
  {name:"ржХржорзНржмрзЛ ржкрзНржпрж╛ржХ", note:"ржПржХрж╛ржзрж┐ржХ ржЧрзНрж░рзБржкрзЗрж░ рж╕ржоржирзНржмржпрж╝", price:450, demoLink:"https://t.me/example_demo_link"},
  {name:"ржмрж┐рж╢рзЗрж╖ ржбрж┐рж▓", note:"ржПржХржмрж╛рж░ ржХрж┐ржирзБржи, ржЖржЬрзАржмржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи", price:600, demoLink:"https://t.me/example_demo_link"},
  {name:"рж▓рж╛ржЗржлржЯрж╛ржЗржо ржПржХрзНрж╕рзЗрж╕", note:"ржПржХржмрж╛рж░ ржкрзЗржорзЗржирзНржЯрзЗ ржЖржЬрзАржмржи ржПржХрзНрж╕рзЗрж╕", price:1000, demoLink:"https://t.me/example_demo_link"},
  {name:"ржлрзНржпрж╛ржорж┐рж▓рж┐ ржкрзНржпрж╛ржХ", note:"ржкрж░рж┐ржмрж╛рж░рзЗрж░ ржЬржирзНржп ржмрж┐рж╢рзЗрж╖ ржкрзНржпрж╛ржХрзЗржЬ", price:750, demoLink:"https://t.me/example_demo_link"},
  {name:"рж╢рж┐ржХрзНрж╖рж╛ржорзВрж▓ржХ ржЧрзНрж░рзБржк", note:"ржирждрзБржи ржХрж┐ржЫрзБ рж╢рж┐ржЦрждрзЗ ржЪрж╛ржи?", price:20, demoLink:"https://t.me/example_demo_link"},
  {name:"ржмрж┐ржирзЛржжржирзЗрж░ рж╣рж╛ржм", note:"рж╢рзБржзрзБржорж╛рждрзНрж░ ржмрж┐ржирзЛржжржирзЗрж░ ржЬржирзНржп", price:50, demoLink:"https://t.me/example_demo_link"}
];

/* ================
   Navigation / Views
   ================ */
const VIEWS = ['tgMarket','slide1','slide2','paymentSlide','successSlide'];
let historyStack = [];
let currentView = 'tgMarket';

function showView(viewId, pushHistory=true){
  if (!VIEWS.includes(viewId)) return;
  if (pushHistory && currentView) historyStack.push(currentView);
  VIEWS.forEach(v => {
    const el = document.getElementById(v);
    if (el) el.style.display = (v === viewId ? 'block' : 'none');
  });
  currentView = viewId;
  // update url hash for convenience (optional)
  try { history.replaceState(null, '', '#'+viewId); } catch(e){}
}

function goBack(){
  const prev = historyStack.pop();
  if (prev) showView(prev, false);
  else showView('tgMarket', false);
}

/* ================
   Render Reviews
   ================ */
function renderReviews(){
  const container = document.getElementById('slide1Content');
  container.innerHTML = '';
  reviews.forEach(r => {
    const div = document.createElement('div');
    div.className = 'listItem';
    const img = document.createElement('img'); img.src = r.avatar; img.className='avatar';
    const txt = document.createElement('div');
    txt.innerHTML = `<b>${escapeHtml(r.user)}</b><div style="font-size:13px;color:#555;margin-top:6px;">${escapeHtml(r.msg)}</div>`;
    div.appendChild(img); div.appendChild(txt);
    container.appendChild(div);
  });
}

/* ================
   Render Offers / Search
   ================ */
function renderOffers(list){
  const container = document.getElementById('slide2Content');
  container.innerHTML = '';
  list.forEach(item => {
    const row = document.createElement('div');
    row.style = "margin:8px 0;padding:12px;border:1px solid #eee;border-radius:8px;display:flex;justify-content:space-between;align-items:center";
    const left = document.createElement('div');
    left.innerHTML = `<div style="font-weight:700">${escapeHtml(item.name)} <span style="background:#0072ff;color:#fff;padding:2px 6px;border-radius:6px;font-size:12px;margin-left:6px;">ЁЯТ▓${item.price}</span></div>
                      <div style="font-size:13px;color:#555;margin-top:6px;">${escapeHtml(item.note)}</div>`;
    
    const btnContainer = document.createElement('div');
    btnContainer.style = "display:flex;gap:8px;";

    const demoBtn = document.createElement('a');
    demoBtn.className = 'smallBtn';
    demoBtn.style = "padding:8px 10px;border-radius:8px;background:#f0f0f0;color:#333;text-decoration:none;font-weight:700;";
    demoBtn.textContent = 'ЁЯСБя╕П Demo';
    demoBtn.href = item.demoLink;
    demoBtn.target = '_blank';
    
    const buyBtn = document.createElement('button');
    buyBtn.className = 'smallBtn';
    buyBtn.style = "padding:8px 10px;border-radius:8px;background:#00c6ff;color:#fff;border:none;cursor:pointer;font-weight:700;";
    buyBtn.textContent = 'ЁЯТ╕ Buy Now';
    buyBtn.addEventListener('click', () => buyItem(item));

    btnContainer.appendChild(demoBtn);
    btnContainer.appendChild(buyBtn);

    row.appendChild(left);
    row.appendChild(btnContainer);
    container.appendChild(row);
  });
}

document.getElementById('searchInput').addEventListener('input', function(){
  const q = this.value.trim().toLowerCase();
  const filtered = slide2Data.filter(it => it.name.toLowerCase().includes(q) || it.note.toLowerCase().includes(q));
  renderOffers(filtered);
});

/* ================
   Buy -> Payment
   ================ */
function buyItem(item){
  document.getElementById('payGroupName').innerText = item.name;
  document.getElementById('payGroupPrice').innerText = item.price;
  document.getElementById('pay_name').value = ''; // Clear old data
  document.getElementById('pay_phone').value = '';
  document.getElementById('pay_amount').value = item.price;
  document.getElementById('pay_trx').value = '';
  showView('paymentSlide', true);
}

/* ================
   Payment submit -> send to Telegram (via PROXY or DIRECT)
   ================ */
function escapeHtml(s){
  if (!s && s !== 0) return '';
  return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
}

function sendToTelegramServer(payload){
  // payload: {name,phone,amount,trx,userCount}
  // If PROXY_URL set -> POST to PROXY_URL with JSON (recommended)
  // Else if BOT_TOKEN + CHAT_ID set -> try direct to Telegram (may fail due to CORS)
  return new Promise((resolve, reject) => {
    if (PROXY_URL){
      fetch(PROXY_URL, {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(payload)
      }).then(r => r.json ? r.json() : r.text()).then(data => resolve(data)).catch(err => reject(err));
      return;
    }
    if (BOT_TOKEN && CHAT_ID){
      // build HTML-wrapped message to show as code box in Telegram
      const lines = [
        "ЁЯУж ржирждрзБржи ржкрзЗржорзЗржирзНржЯ ржЖржмрзЗржжржи",
        "ЁЯСд ржирж╛ржо: " + escapeHtml(payload.name),
        "ЁЯУ▒ ржлрзЛржи: " + escapeHtml(payload.phone),
        "ЁЯТ░ ржкрж░рж┐ржорж╛ржг: " + escapeHtml(payload.amount),
        "ЁЯФС ржЯрзНрж░рж╛ржиржЬрзЗржХрж╢ржи: " + escapeHtml(payload.trx),
        "ЁЯСе ржЧрзНрж░рзБржк: " + escapeHtml(payload.groupName)
      ];
      const textHtml = "<pre>"+escapeHtml(lines.join("\n"))+"</pre>";
      fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify({chat_id: CHAT_ID, text: textHtml, parse_mode: 'HTML'})
      }).then(r => r.json()).then(data => {
        if (data && data.ok) resolve(data);
        else reject(data);
      }).catch(err => reject(err));
      return;
    }
    reject(new Error('No PROXY_URL or BOT_TOKEN configured.'));
  });
}

/* Payment form handling */
document.getElementById('paymentForm').addEventListener('submit', function(e){
  e.preventDefault();
  const name = document.getElementById('pay_name').value.trim();
  const phone = document.getElementById('pay_phone').value.trim();
  const amount = document.getElementById('pay_amount').value.trim();
  const trx = document.getElementById('pay_trx').value.trim();
  const groupName = document.getElementById('payGroupName').innerText; // ржЧрзНрж░рзБржк ржПрж░ ржирж╛ржо ржирзЗржУрзЯрж╛ рж╣рзЯрзЗржЫрзЗ

  const payload = {name, phone, amount, trx, groupName};

  // Disable submit to avoid double
  const submitBtn = this.querySelector('button[type="submit"]');
  submitBtn.disabled = true;
  submitBtn.textContent = 'ржкрзНрж░рж╕рзЗрж╕рж┐ржВ...';

  sendToTelegramServer(payload).then(res => {
    // success
    document.getElementById('successText').innerText = "рждрзЛржорж╛рж░ ржЖржмрзЗржжржи ржЧрзНрж░рж╣ржг ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ тАФ ржпрж╛ржЪрж╛ржЗрзЯрзЗрж░ ржкрж░ рж▓рж┐ржВржХ ржкрзНрж░рзЗрж░ржг ржХрж░рж╛ рж╣ржмрзЗред ржзржирзНржпржмрж╛ржж ЁЯШК";
    showView('successSlide', true);
  }).catch(err => {
    console.error('Send error:', err);
    // Friendly error message & hint
    alert('ржкрзЗржорзЗржирзНржЯ ржбрзЗржЯрж╛ ржЯрзЗрж▓рж┐ржЧрзНрж░рж╛ржорзЗ ржкрж╛ржарж╛рждрзЗ рж╕ржорж╕рзНржпрж╛ рж╣рзЯрзЗржЫрзЗред\nтЬЕ ржкрзНрж░рж╕рзНрждрж╛ржмрж┐ржд: Google Apps Script proxy ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи (ржирзАржЪрзЗ ржжрзЗржУрзЯрж╛)ред\n\nError: ' + (err.message || JSON.stringify(err)));
    // still show successSlide? ржирж╛ тАФ рж░рж╛ржЬрж┐ рж╣рж▓рзЗ show error. ржПржЦрж╛ржирзЗ ржЖржорж░рж╛ ржлрж┐рж░рзЗ ржкрж╛ржарж╛ржЗ paymentSlideред
  }).finally(()=> {
    submitBtn.disabled = false;
    submitBtn.textContent = 'тЬЕ Submit Payment';
    // clear trx maybe? keep fields for user's convenience
  });
});

/* ================
   Buttons & Back handlers
   ================ */
document.getElementById('btnReviews').addEventListener('click', () => {
  renderReviews();
  showView('slide1', true);
});
document.getElementById('btnOffers').addEventListener('click', () => {
  renderOffers(slide2Data);
  showView('slide2', true);
});
document.getElementById('back1').addEventListener('click', goBack);
document.getElementById('back2').addEventListener('click', goBack);
document.getElementById('back3').addEventListener('click', goBack);
document.getElementById('back4').addEventListener('click', () => { historyStack = []; showView('tgMarket', false); });

/* ================
   User Counter (box) auto-increment
   ================ */
let userCount = 10000;
const counterEl = document.getElementById('userCount');
counterEl.innerText = userCount.toLocaleString();

setInterval(() => {
  const increase = Math.floor(Math.random()*7) + 2; // 2..8
  userCount += increase;
  counterEl.innerText = userCount.toLocaleString();
}, 4500);

/* ================
   Init: show home
   ================ */
showView('tgMarket', false);

/* ================
   Extra: helper to open in new tab with deep link (optional)
   ================ */
</script>
</body>
</html>
