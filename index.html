 <!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ржЯрзЗрж▓рж┐ржЧрзНрз░рж╛ржо ржмрж╛ржЬрж╛рж░ тАФ рж╕ржорзНржкрзВрж░рзНржг</title>
<style>
  /* RESET */
  *{box-sizing:border-box}
  body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;background:#eef7ff;overflow-x:hidden;color:#222;line-height:1.5}

  /* BACKGROUND & LAYOUT */
  #appWrap{position:relative;z-index:2;padding:24px 18px;}
  .card{max-width:720px;margin:24px auto;background:#fff;padding:32px;border-radius:24px;box-shadow:0 18px 40px rgba(0,0,0,0.06);border:1px solid #e0f0ff;}
  .center{text-align:center}

  /* TYPOGRAPHY */
  h1{margin:0 0 8px 0;font-size:28px;font-weight:700;color:#0b63d6}
  h2{margin:6px 0 16px 0;font-size:24px;font-weight:700;color:#0b63d6;text-align:center;}
  p.lead{color:#666;margin-top:12px;font-size:16px;}
  p{font-size:15px;color:#444;}
  
  /* BADGE & COUNTER */
  .badge{width:120px;height:120px;border-radius:50%;background:#e0f0ff;display:inline-flex;align-items:center;justify-content:center;font-weight:700;font-size:32px;color:#0b63d6;box-shadow:0 6px 18px rgba(0,0,0,0.08);}
  .userCounterBox{display:inline-block;padding:12px 20px;border-radius:12px;background:linear-gradient(135deg,#5c8ff7,#0b63d6);color:#fff;font-weight:700;box-shadow:0 8px 22px rgba(0,0,0,0.1);margin-top:16px;font-size:16px;}

  /* UI BUTTONS */
  .btn{width:100%;padding:16px;border-radius:16px;color:#fff;border:none;font-weight:700;cursor:pointer;margin:16px 0;font-size:16px;transition:transform 0.2s ease, box-shadow 0.2s ease;}
  .btn:hover{transform:translateY(-2px);box-shadow:0 6px 12px rgba(0,0,0,0.1);}
  .btn.blue{background:linear-gradient(135deg,#00c6ff,#0b63d6);}
  .btn.pink{background:linear-gradient(135deg,#ff7eb3,#ff597a);}
  .btn.ghost{background:#f0f7ff;color:#0b63d6;border:1px solid #d4e8ff;}
  .smallBtn{padding:10px 18px;border-radius:12px;font-size:14px;}
  .langBtn{width:48%;}
  
  /* LIST ITEMS */
  .listItem{display:flex;gap:16px;align-items:flex-start;margin-bottom:16px;background:#f8fcff;padding:16px;border-radius:16px;box-shadow:0 6px 18px rgba(0,0,0,0.03);border:1px solid #f0f8ff;}
  .avatar{width:50px;height:50px;border-radius:50%;object-fit:cover;border:2px solid #fff;box-shadow:0 2px 8px rgba(0,0,0,0.1);}
  
  /* INPUTS */
  input[type="text"], input[type="tel"], input[type="number"]{width:100%;padding:12px;border-radius:12px;border:1px solid #d4e8ff;margin:8px 0;background:#f9fdff;font-size:15px;color:#333;transition:border-color 0.2s;}
  input:focus{outline:none;border-color:#0b63d6;box-shadow:0 0 0 3px rgba(11, 99, 214, 0.1);}

  /* FOOTER */
  .footer{color:#777;font-size:13px;margin-top:24px;border-top:1px dashed #e2e8f0;padding-top:16px;text-align:center;}

  /* SMALL RESPONSIVE TWEAKS */
  @media (max-width:480px){
    .card{padding:24px;border-radius:18px;margin:18px auto;}
    .badge{width:100px;height:100px;font-size:26px;}
    h1{font-size:24px;}
  }
</style>
</head>
<body>

  <div id="appWrap">
    <div id="tgMarket" class="card center">
      <h1 id="mainTitle">ржЯрзЗрж▓рж┐ржЧрзНрз░рж╛ржо ржмрж╛ржЬрж╛рж░ ЁЯЪАЁЯТм</h1>
      <div class="badge">18+</div>
      <p class="lead" id="leadText">ЁЯТб ржЯрзЗрж▓рж┐ржЧрзНрз░рж╛ржо ржЧрзНрз░рзБржк рж╕рзЗрж▓ тАУ ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржЧрзНрз░рзБржк, ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржнрж┐ржбрж┐ржУ, 4K Plus Regulations, рж▓рзЛ ржкрзНрж░рж╛ржЗрж╕ ржПржмржВ ржлрж╛рж╕рзНржЯ рж╕рж╛рж░рзНржнрж┐рж╕! рждрж╛ржЗ ржПржЦржирж┐ ржЬржпрж╝рзЗржи рж╣ржи ЁЯСЗ</p>

      <div style="max-width:560px;margin:24px auto;">
        <button id="btnOffers" class="btn pink">ЁЯТ░ ржЧрзНрз░рзБржк ржжрзЗржЦрзБржи</button>
        <button id="btnReviews" class="btn blue">ЁЯФЧ рж░рж┐ржнрж┐ржЙ ржжрзЗржЦрзБржи</button>
        <button id="btnHistory" class="btn ghost">ЁЯУЛ ржХрзНрж░ржпрж╝рзЗрж░ ржЗрждрж┐рж╣рж╛рж╕</button>
      </div>

      <div class="userCounterBox">
        <span id="userCountLabel">ЁЯСе ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА:</span> <span id="userCount">10,000</span>+
      </div>
      
      <div style="max-width:560px;margin:24px auto;display:flex;justify-content:space-between;gap:10px;">
        <button id="btnLangBn" class="btn ghost smallBtn langBtn">ржмрж╛ржВрж▓рж╛</button>
        <button id="btnLangEn" class="btn ghost smallBtn langBtn">English</button>
      </div>

      <div style="max-width:560px;margin:0 auto;">
        <div style="background:#f8fcff;border-radius:16px;padding:20px;margin-top:20px;box-shadow:0 4px 15px rgba(0,0,0,0.03);text-align:left;border:1px solid #f0f8ff;">
          <h3 style="margin:0 0 10px 0;color:#0b63d6;" id="aboutTitle">ржЖржорж╛ржжрзЗрж░ рж╕ржорзНржкрж░рзНржХрзЗ</h3>
          <p style="margin:0;color:#555;font-size:14px;" id="aboutText">ржЯрзЗрж▓рж┐ржЧрзНрз░рж╛ржо ржмрж╛ржЬрж╛рж░ рж╣рж▓рзЛ ржПржХржЯрж┐ ржкрзНрж▓рзНржпрж╛ржЯржлрж░рзНржо ржпрзЗржЦрж╛ржирзЗ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАрж░рж╛ ЁЯФЮ ржЯрзЗрж▓рж┐ржЧрзНрз░рж╛ржо ржЧрзНрж░рзБржк ржмрж┐рж╢рзНржмрж╛рж╕рзЗрж░ рж╕рж╛ржерзЗ ржХрж┐ржирждрзЗ ржкрж╛рж░рзЗржи ред ржЖржорж╛рж░ рж╕рждрждрж╛рж░ рж╕рж╛ржерзЗ рж╕рж╛рж░рзНржнрж┐рж╕ ржжрж┐ржпрж╝рзЗ ржЖрж╕ржЫрж┐ ред ржЖржорж╛ржжрзЗрж░ рж╕рж╛ржерзЗ ржерж╛ржХрзБржи ржзржирзНржпржмрж╛ржж ЁЯФеред</p>
        </div>

        <div style="background:#f8fcff;border-radius:16px;padding:20px;margin-top:16px;box-shadow:0 4px 15px rgba(0,0,0,0.03);text-align:left;border:1px solid #f0f8ff;">
          <h3 style="margin:0 0 10px 0;color:#0b63d6;" id="supportTitle">рж╕рж╛ржкрзЛрж░рзНржЯ</h3>
          <p style="margin:0;color:#555;font-size:14px;" id="supportText">
            ЁЯТм WhatsApp: <a href="#" target="_blank" style="color:#0b63d6;text-decoration:none;">ржПржЦрж╛ржирзЗ ржХрзНрж▓рж┐ржХ ржХрж░рзБржи</a><br>
            тЬЙя╕П Email: <a href="mailto:support@example.com" style="color:#0b63d6;text-decoration:none;">support@example.com</a><br>
            ЁЯУ▒ Telegram: <a href="#" target="_blank" style="color:#0b63d6;text-decoration:none;">ржПржЦрж╛ржирзЗ ржХрзНрж▓рж┐ржХ ржХрж░рзБржи</a>
          </p>
        </div>
      </div>

      <div class="footer">
        ┬й 2025 <span id="footerText">ржЯрзЗрж▓рж┐ржЧрзНрз░рж╛ржо ржмрж╛ржЬрж╛рж░ | рж╕ржорж╕рзНржд ржЕржзрж┐ржХрж╛рж░ рж╕ржВрж░ржХрзНрж╖рж┐рждред</span>
      </div>
    </div>

    <div id="slide1" class="card" style="display:none;">
      <h2 id="reviewsTitle">рж░рж┐ржпрж╝рзЗрж▓рж┐рж╕рзНржЯрж┐ржХ рж░рж┐ржнрж┐ржЙ</h2>
      <div id="slide1Content"></div>
      <div style="text-align:center;margin-top:20px;"><button id="back1" class="smallBtn btn ghost">тмЕя╕П <span class="backBtnText">Back</span></button></div>
    </div>

    <div id="slide2" class="card" style="display:none;">
      <h2 id="offersTitle">рззрзо+ рж╕рзЗрж▓ ржУ ржЕржлрж╛рж░</h2>
      <input type="text" id="searchInput" placeholder="ржЧрзНрж░рзБржк ржЕржирзБрж╕ржирзНржзрж╛ржи ржХрж░рзБржи..." />
      <div id="slide2Content" style="margin-top:16px"></div>
      <div style="text-align:center;margin-top:20px;">
        <button id="showMoreBtn" class="smallBtn btn blue" style="display:none;">ржЖрж░ржУ ржжрзЗржЦрж╛ржи</button>
        <button id="back2" class="smallBtn btn ghost">тмЕя╕П <span class="backBtnText">Back</span></button>
      </div>
    </div>

    <div id="slide3" class="card" style="display:none;">
      <h2 id="historyTitle">ржХрзНрж░ржпрж╝рзЗрж░ ржЗрждрж┐рж╣рж╛рж╕</h2>
      <div id="slide3Content"></div>
      <p id="noHistoryText" style="text-align:center;display:none;">ржЖржкржирж╛рж░ ржХрзЛржирзЛ ржХрзНрж░ржпрж╝рзЗрж░ ржЗрждрж┐рж╣рж╛рж╕ ржирзЗржЗред</p>
      <div style="text-align:center;margin-top:20px;"><button id="back5" class="smallBtn btn ghost">тмЕя╕П <span class="backBtnText">Back</span></button></div>
    </div>

    <div id="paymentSlide" class="card" style="display:none;">
      <h2 id="paymentTitle">ЁЯТ│ ржкрзЗржорзЗржирзНржЯ ржЗржирзНржЯрж╛рж░ржлрзЗрж╕</h2>
      <div style="font-size:14px;color:#333;margin-top:6px;line-height:1.6;padding:16px;background:#f8fcff;border-radius:12px;border:1px solid #f0f8ff;">
        +8801769xxxxxx<br><span id="paymentInstruction">Bkash / Nagad тАФ app ржмрж╛ ржбрж╛ржпрж╝рж╛рж▓ ржХрж░рзЗ ржЙржкрж░рзЗрж░ ржжрзЗржУржпрж╝рж╛ ржирж╛ржорзНржмрж╛рж░рзЗ рж╕рзЗржирзНржб ржорж╛ржирж┐ ржХрж░рзЗ ржкрзЗржорзЗржирзНржЯ ржПрж░ Transaction ID ржХржкрж┐ ржХрж░рзЗ ржирж┐ржЪрзЗрж░ ржлрж░рзНржо ржкрзВрж░ржг ржХрж░рзЗ рж╕рж╛ржмржорж┐ржЯ ржХрж░рзЛред</span>
      </div>

      <p style="margin-top:20px;"><span id="groupLabel">ржЧрзНрж░рзБржк:</span> <b id="payGroupName" style="color:#0b63d6">тАФ</b></p>
      <p><span id="priceLabel">ржкрзНрж░рж╛ржЗрж╕:</span> <b id="payGroupPrice" style="color:#0b63d6">тАФ</b> <span id="currency">ржЯрж╛ржХрж╛</span></p>

      <form id="paymentForm">
        <p id="tgNote" style="margin-top:20px; color: #0b63d6; font-size: 14px; text-align: left; font-weight: 600;">ржпрзЗ ржЯрзЗрж▓рж┐ржЧрзНрз░рж╛ржо ржЖржЗржбрж┐рждрзЗ ржПржб рж╣ржмрж╛ рж╕рзЗржЗ ржЖржЗржбрж┐рж░ ржЗржЙржЬрж╛рж░ ржирж╛ржо ржжрж╛ржУ</p>
        <input type="text" id="pay_name" placeholder="ржЖржкржирж╛рж░ ржирж╛ржо" required />
        <input type="text" id="pay_tg_username" placeholder="ржЯрзЗрж▓рж┐ржЧрзНрж░рж╛ржо ржЗржЙржЬрж╛рж░ржирзЗржо (@username)" required />
        <input type="number" id="pay_amount" placeholder="ржЯрж╛ржХрж╛рж░ ржкрж░рж┐ржорж╛ржг" required />
        <input type="text" id="pay_trx" placeholder="ржЯрзНрж░рж╛ржиржЬрзЗржХрж╢ржи ржЖржЗржбрж┐" required />
        <div style="text-align:center;margin-top:10px">
          <button type="submit" class="btn blue" id="submitPaymentBtn">тЬЕ Submit Payment</button>
        </div>
      </form>

      <div style="text-align:center;margin-top:20px;"><button id="back3" class="smallBtn btn ghost">тмЕя╕П <span class="backBtnText">Back</span></button></div>
    </div>

    <div id="successSlide" class="card" style="display:none;text-align:center;">
      <h2 id="successTitle">ЁЯОЙ ржЖржмрзЗржжржи рж╕ржорзНржкржирзНржи!</h2>
      <p id="successText" style="font-size:16px;color:#0b63d6;margin-top:10px;">рждрзЛржорж╛рж░ ржЖржмрзЗржжржи ржЧрзНрж░рж╣ржг ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ тАФ ржпрж╛ржЪрж╛ржЗрзЯрзЗрж░ ржкрж░ рж▓рж┐ржВржХ ржкрзНрж░рзЗрж░ржг ржХрж░рж╛ рж╣ржмрзЗред</p>
      <div style="margin-top:20px;"><button id="back4" class="smallBtn btn ghost">ЁЯПа <span class="backToHomeBtnText">Back to Home</span></button></div>
    </div>

  </div>

<script>
/* ==========================
   CONFIG: ржПржЦрж╛ржирзЗ рждрзЛржорж╛рж░ рж╕рзЗржЯрж┐ржВрж╕ ржмрж╕рж╛ржУ
   ==========================
   - PROXY_URL (ржкрзНрж░рж╕рзНрждрж╛ржмрж┐ржд): ржпржжрж┐ рждрзБржорж┐ Google Apps Script ржжрж┐рзЯрзЗржЗ ржкрж╛ржарж╛рждрзЗ ржЪрж╛ржУ тАФ рж╕рзЗржЗ ржУрзЯрзЗржм ржЕрзНржпрж╛ржкрзЗрж░ URL ржмрж╕рж╛ржУред
   - BOT_TOKEN + CHAT_ID: рж╕рж░рж╛рж╕рж░рж┐ ржЯрзЗрж▓рж┐ржЧрзНрж░рж╛ржо ржкрж╛ржарж╛ржирзЛрж░ ржЬржирзНржп (CORS рж╕ржорж╕рзНржпрж╛рж░ ржЭрзБржБржХрж┐ ржЖржЫрзЗ)ред
   - TELEGRAM_SUPPORT_LINK: ржпрзЗ ржЧрзНрж░рзБржкрзЗ рж╕рж╛ржкрзЛрж░рзНржЯрзЗрж░ ржЬржирзНржп ржЗржЙржЬрж╛рж░ржХрзЗ ржкрж╛ржарж╛ржмрзЗред
*/
const PROXY_URL = "";
const BOT_TOKEN  = "8373393733:AAFG3CmRbUNlg3mbZkxuOvpN6ZxC4U4iU7U";
const CHAT_ID    = "8317578721";
const TELEGRAM_SUPPORT_LINK = "https://t.me/your_support_group";

/* ==========================
   ржбрж╛ржЯрж╛: рж░рж┐ржнрж┐ржЙ ржУ ржЕржлрж╛рж░ (ржЪрж╛рж╣рж┐рж▓рзЗ рждрзБржорж┐ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рждрзЗ ржкрж╛рж░рзЛ)
   ========================== */
const reviews = [
  {user:"Mr. Rumon", msg:"рж╕рзЗржмрж╛ ржЦрзБржм ржнрж╛рж▓рзЛ! ржПржЦрж╛ржирзЗ ржЕржирзЗржХ рж╕рзБржмрж┐ржзрж╛ ржкрзЗрж▓рж╛ржоред", avatar:"https://i.pravatar.cc/60?img=1"},
  {user:"Md. Rakinul", msg:"ржЧрзНрж░рзБржкржЧрзБрж▓рзЛ ржмрзЗрж╢ ржЖржХрж░рзНрж╖ржгрзАржпрж╝ ржПржмржВ ржирж┐рж░рж╛ржкржжред", avatar:"https://i.pravatar.cc/60?img=2"},
  {user:"Masum", msg:"ржЖржорж┐ ржирждрзБржи рж╕ржжрж╕рзНржп, ржХрж┐ржирзНрждрзБ рж╕ржм ржХрж┐ржЫрзБ рж╕рж╣ржЬрзЗ ржмрзБржЭрждрзЗ ржкрж╛рж░рж▓рж╛ржоред", avatar:"https://i.pravatar.cc/60?img=3"},
  {user:"Rakib lislam", msg:"ржЕржлрж╛рж░ржЧрзБрж▓рзЛ рж╕рждрзНржпрж┐ржЗ ржжрж╛рж░рзБржиред", avatar:"https://i.pravatar.cc/60?img=4"},
  {user:"Monika", msg:"ржорзЛржмрж╛ржЗрж▓ ржерзЗржХрзЗ рж╕ржм ржХрж╛ржЬ ржЦрзБржм рж╕рж╣ржЬред", avatar:"https://i.pravatar.cc/60?img=5"}
];

const slide2Data = [
  {name:"Pee In PublicЁЯФе", note:"рж╕ржХрж▓ ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржХржирзНржЯрзЗржирзНржЯ ржПржмржВ рж╕ржХрж▓ рж╕рзБржмрж┐ржзрж╛ ЁЯФе!", price:299, demoLink:"https://t.me/allinonedemo69/4?single"},
  {name:"Kerala Premium ЁЯФе", note:"рж╕ржХрж▓ Kerala ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржнрж┐ржбрж┐ржУ ржПржмржВ ржЖржЗржбрж┐ ржирж╖рзНржЯ рж╣рж▓рзЗ ржЕржирзНржп ржЖржЗржбрж┐рждрзЗ ржПржб ", price:29, demoLink:"https://t.me/allinonedemo69/11?single"},
  {name:"ржжрзЗрж╢рж┐ ржнрж┐ржбрж┐ржУ ЁЯе╡", note:"рж╕ржХрж▓ ржнрж╛ржЗрж░рж╛рж▓ ржжрзЗрж╢рж┐ ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржнрж┐ржбрж┐ржУ 4k+ рж╕рж╛ржерзЗ ржбрж╛ржЙржирж▓рзЛржб рж╕рзБржмрж┐ржзрж╛ ЁЯФе", price:29, demoLink:"https://t.me/example_demo_link"},
  {name:"Mix Video ржЧрзНрз░рзБржк ЁЯФе", note:"40 рж╣рж╛ржЬрж╛рж░ ржкрзНрж▓рж╛рж╕ ржнрж┐ржбрж┐ржУ ржУ ржлржЯрзЛ ЁЯФе", price:49, demoLink:"https://t.me/allinonedemo69/19"},
  {name:"Hidden CamЁЯФе", note:"рж╕ржмржЧрзБрж▓рзЛ ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржнрж┐ржбрж┐ржУ ржПржмржВ HD ржЖржХрж╛рж░рзЗ ржжрзЗржЦрждрзЗ ржкрж╛ржмрзЗржи", price:299, demoLink:"https://t.me/example_demo_link"},
  {name:" Actress Hot Photos ЁЯУ╕ ", note:"ржПржХрж╕рж╛ржерзЗ рждрж┐ржиржЯрж╛ ржЧрзНрз░рзБржк ржПржмржВ 50 рж╣рж╛ржЬрж╛рж░ ржкрзНрж▓рж╛рж╕ ржлржЯрзЛ", price:49, demoLink:"https://t.me/allinonedemo69/20?single"},
  {name:"ржЖржирзНржЯрж┐ рж▓рж╛ржнрж╛рж░ ржЧрзНрз░рзБржкЁЯе╡", note:"рж╕рзЗрж░рж╛ ржжрж╛ржорзЗ рж╕ржХрж▓ ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржХржирзНржЯрзЗржирзНржЯ ЁЯФе", price:100, demoLink:"https://t.me/example_demo_link"},
  {name:"Mallu Laak ЁЯФЮ", note:"рж╢рзБржзрзБржорж╛рждрзНрж░ ржмрж┐рж╢рзЗрж╖ рж╕ржжрж╕рзНржпржжрзЗрж░ ржЬржирзНржп ржПржмржВ Mallu рж╕ржХрж▓ ржнрж╛ржЗрж░рж╛рж▓ ржнрж┐ржбрж┐ржУ ржУ ржирж┐ржпрж╝ржорж┐ржд ржнрж┐ржбрж┐ржУ ржЖржкрж▓рзЛржб ЁЯе╡", price:250, demoLink:"https://t.me/example_demo_link"},
  {name:"ржЖрж▓рзНржЯрж┐ржорзЗржЯ ржбрж┐рж▓", note:"рж╕рж╛рж░рж╛ ржмржЫрж░рзЗрж░ рж╕рзЗрж░рж╛ ржЕржлрж╛рж░", price:900, demoLink:"https://t.me/example_demo_link"},
  {name:"ржирждрзБржи ржмржЫрж░рзЗрж░ ржкрзНржпрж╛ржХ", note:"ржиржмржмрж░рзНрж╖рзЗрж░ ржмрж┐рж╢рзЗрж╖ ржкрзНржпрж╛ржХрзЗржЬ", price:180, demoLink:"https://t.me/example_demo_link"},
  {name:"ржмрзНрж▓рзНржпрж╛ржХ ржлрзНрж░рж╛ржЗржбрзЗ ржЕржлрж╛рж░", note:"рж╕рзАржорж┐ржд рж╕ржоржпрж╝рзЗрж░ ржЬржирзНржп", price:70, demoLink:"https://t.me/example_demo_link"},
  {name:"ржбрзЗржЗрж▓рж┐ ржбрж┐рж▓", note:"ржкрзНрж░рждрж┐ржжрж┐ржирзЗрж░ ржЬржирзНржп ржирждрзБржи ржХрж┐ржЫрзБ", price:40, demoLink:"https://t.me/example_demo_link"},
  {name:"ржХрж╛рж╕рзНржЯржо ржкрзНржпрж╛ржХрзЗржЬ", note:"ржЖржкржирж╛рж░ ржкржЫржирзНржж ржорждрзЛ ржХрж╛рж╕рзНржЯржо", price:350, demoLink:"https://t.me/example_demo_link"},
  {name:"рж╕ржкрзНрждрж╛рж╣рж┐ржХ рж╕рж╛ржмрж╕рзНржХрзНрж░рж┐ржкрж╢ржи", note:"рж╕ржкрзНрждрж╛рж╣рзЗ ржирждрзБржи ржХржирзНржЯрзЗржирзНржЯ", price:60, demoLink:"https://t.me/example_demo_link"},
  {name:"ржХржорзНржмрзЛ ржкрзНржпрж╛ржХ", note:"ржПржХрж╛ржзрж┐ржХ ржЧрзНрж░рзБржкрзЗрж░ рж╕ржоржирзНржмржпрж╝", price:450, demoLink:"https://t.me/example_demo_link"},
  {name:"ржмрж┐рж╢рзЗрж╖ ржбрж┐рж▓", note:"ржПржХржмрж╛рж░ ржХрж┐ржирзБржи, ржЖржЬрзАржмржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи", price:600, demoLink:"https://t.me/example_demo_link"},
  {name:"рж▓рж╛ржЗржлржЯрж╛ржЗржо ржПржХрзНрж╕рзЗрж╕", note:"ржПржХржмрж╛рж░ ржкрзЗржорзЗржирзНржЯрзЗ ржЖржЬрзАржмржи ржПржХрзНрж╕рзЗрж╕", price:1000, demoLink:"https://t.me/example_demo_link"},
  {name:"ржлрзНржпрж╛ржорж┐рж▓рж┐ ржкрзНржпрж╛ржХ", note:"ржкрж░рж┐ржмрж╛рж░рзЗрж░ ржЬржирзНржп ржмрж┐рж╢рзЗрж╖ ржкрзНржпрж╛ржХрзЗржЬ", price:750, demoLink:"https://t.me/example_demo_link"},
  {name:"рж╢рж┐ржХрзНрж╖рж╛ржорзВрж▓ржХ ржЧрзНрж░рзБржк", note:"ржирждрзБржи ржХрж┐ржЫрзБ рж╢рж┐ржЦрждрзЗ ржЪрж╛ржи?", price:20, demoLink:"https://t.me/example_demo_link"},
  {name:"ржмрж┐ржирзЛржжржирзЗрж░ рж╣рж╛ржм", note:"рж╢рзБржзрзБржорж╛рждрзНрж░ ржмрж┐ржирзЛржжржирзЗрж░ ржЬржирзНржп", price:50, demoLink:"https://t.me/example_demo_link"}
];

let purchasedHistory = JSON.parse(localStorage.getItem('purchasedHistory')) || [];

/* ================
   Language Data
   ================ */
const langData = {
  bn: {
    mainTitle: 'ржЯрзЗрж▓рж┐ржЧрзНрз░рж╛ржо ржмрж╛ржЬрж╛рж░ ЁЯЪАЁЯТм',
    leadText: 'ржЯрзЗрж▓рж┐ржЧрзНрз░рж╛ржо ржЧрзНрз░рзБржк рж╕рзЗрж▓ тАУ ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржЧрзНрз░рзБржк, ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржнрж┐ржбрж┐ржУ, 4K Plus Regulations, рж▓рзЛ ржкрзНрж░рж╛ржЗрж╕ ржПржмржВ ржлрж╛рж╕рзНржЯ рж╕рж╛рж░рзНржнрж┐рж╕! рждрж╛ржЗ ржПржЦржирж┐ ржЬржпрж╝рзЗржи рж╣ржи ЁЯСЗ',
    btnOffers: 'ЁЯТ░ ржЧрзНрз░рзБржк ржжрзЗржЦрзБржи',
    btnReviews: 'ЁЯФЧ рж░рж┐ржнрж┐ржЙ ржжрзЗржЦрзБржи',
    btnHistory: 'ЁЯУЛ ржХрзНрж░ржпрж╝рзЗрж░ ржЗрждрж┐рж╣рж╛рж╕',
    userCountLabel: 'ЁЯСе ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА:',
    aboutTitle: 'ржЖржорж╛ржжрзЗрж░ рж╕ржорзНржкрж░рзНржХрзЗ',
    aboutText: 'ржЯрзЗрж▓рж┐ржЧрзНрз░рж╛ржо ржмрж╛ржЬрж╛рж░ рж╣рж▓рзЛ ржПржХржЯрж┐ ржкрзНрж▓рзНржпрж╛ржЯржлрж░рзНржо ржпрзЗржЦрж╛ржирзЗ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАрж░рж╛ ЁЯФЮ ржЯрзЗрж▓рж┐ржЧрзНрз░рж╛ржо ржЧрзНрж░рзБржк ржмрж┐рж╢рзНржмрж╛рж╕рзЗрж░ рж╕рж╛ржерзЗ ржХрж┐ржирждрзЗ ржкрж╛рж░рзЗржи ред ржЖржорж╛рж░ рж╕рждрждрж╛рж░ рж╕рж╛ржерзЗ рж╕рж╛рж░рзНржнрж┐рж╕ ржжрж┐ржпрж╝рзЗ ржЖрж╕ржЫрж┐ ред ржЖржорж╛ржжрзЗрж░ рж╕рж╛ржерзЗ ржерж╛ржХрзБржи ржзржирзНржпржмрж╛ржж ЁЯФеред',
    supportTitle: 'рж╕рж╛ржкрзЛрж░рзНржЯ',
    supportText: 'ЁЯТм WhatsApp: <a href="#" target="_blank" style="color:#0b63d6;text-decoration:none;">ржПржЦрж╛ржирзЗ ржХрзНрж▓рж┐ржХ ржХрж░рзБржи</a><br>тЬЙя╕П Email: <a href="mailto:support@example.com" style="color:#0b63d6;text-decoration:none;">support@example.com</a><br>ЁЯУ▒ Telegram: <a href="#" target="_blank" style="color:#0b63d6;text-decoration:none;">ржПржЦрж╛ржирзЗ ржХрзНрж▓рж┐ржХ ржХрж░рзБржи</a>',
    footerText: 'ржЯрзЗрж▓рж┐ржЧрзНрз░рж╛ржо ржмрж╛ржЬрж╛рж░ | рж╕ржорж╕рзНржд ржЕржзрж┐ржХрж╛рж░ рж╕ржВрж░ржХрзНрж╖рж┐рждред',
    reviewsTitle: 'рж░рж┐ржпрж╝рзЗрж▓рж┐рж╕рзНржЯрж┐ржХ рж░рж┐ржнрж┐ржЙ',
    offersTitle: '18+ ржЧрзНрз░рзБржк рж╕ржорзВрж╣ ЁЯФЮ',
    searchInput: 'ржЧрзНрж░рзБржк ржЕржирзБрж╕ржирзНржзрж╛ржи ржХрж░рзБржи...',
    showMoreBtn: 'ржЖрж░ржУ ржжрзЗржЦрж╛ржи',
    historyTitle: 'ржХрзНрж░ржпрж╝рзЗрж░ ржЗрждрж┐рж╣рж╛рж╕',
    noHistoryText: 'ржЖржкржирж╛рж░ ржХрзЛржирзЛ ржХрзНрж░ржпрж╝рзЗрж░ ржЗрждрж┐рж╣рж╛рж╕ ржирзЗржЗред',
    paymentTitle: 'ЁЯТ│ ржкрзЗржорзЗржирзНржЯ ржХрж░рзБржи ЁЯФР',
    paymentInstruction: 'Bkash / Nagad тАФ ржирж╛ржорзНржмрж╛рж░рзЗ рж╕рзЗржирзНржб ржорж╛ржирж┐ ржХрж░рзЗ ржирж┐ржЪрзЗрж░ ржлрж░рзНржо ржкрзВрж░ржг ржХрж░рзЗ рж╕рж╛ржмржорж┐ржЯ ржХрж░рзЛред',
    tgNote: 'ржпрзЗ ржЯрзЗрж▓рж┐ржЧрзНрз░рж╛ржо ржЖржЗржбрж┐рждрзЗ ржПржб рж╣ржмрж╛ рж╕рзЗржЗ ржЖржЗржбрж┐рж░ ржЗржЙржЬрж╛рж░ ржирж╛ржо ржжрж╛ржУ',
    groupLabel: 'ржЧрзНрж░рзБржк:',
    priceLabel: 'ржкрзНрж░рж╛ржЗрж╕:',
    currency: 'ржЯрж╛ржХрж╛',
    payNamePlaceholder: 'ржЖржкржирж╛рж░ ржирж╛ржо',
    payTgUsernamePlaceholder: 'ржЯрзЗрж▓рж┐ржЧрзНрж░рж╛ржо ржЗржЙржЬрж╛рж░ржирзЗржо (@username)',
    payAmountPlaceholder: 'ржЯрж╛ржХрж╛рж░ ржкрж░рж┐ржорж╛ржг',
    payTrxPlaceholder: 'ржЯрзНрж░рж╛ржиржЬрзЗржХрж╢ржи ржЖржЗржбрж┐',
    submitPaymentBtn: 'тЬЕ Submit Payment',
    processingBtn: 'ржкрзНрж░рж╕рзЗрж╕рж┐ржВ...',
    successTitle: 'ЁЯОЙ ржЖржмрзЗржжржи рж╕ржорзНржкржирзНржи!',
    successText: 'рждрзЛржорж╛рж░ ржЖржмрзЗржжржи ржЧрзНрж░рж╣ржг ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ тАФ ржпрж╛ржЪрж╛ржЗрзЯрзЗрж░ ржкрж░ рж▓рж┐ржВржХ ржкрзНрж░рзЗрж░ржг ржХрж░рж╛ рж╣ржмрзЗред ржзржирзНржпржмрж╛ржж ЁЯШК',
    backBtnText: 'Back',
    backToHomeBtnText: 'Back to Home',
    notAddedBtnText: 'ржПржЦржирзЛ ржПржб ржкрж╛ржЗржирж┐'
  },
  en: {
    mainTitle: 'Telegram Market ЁЯЪАЁЯТм',
    leadText: 'Here you can easily find Telegram groups and sales.',
    btnOffers: 'ЁЯТ░ 18+ Sales & Offers',
    btnReviews: 'ЁЯФЧ View Reviews',
    btnHistory: 'ЁЯУЛ Purchase History',
    userCountLabel: 'ЁЯСе Users:',
    aboutTitle: 'About Us',
    aboutText: 'Telegram Market is a platform where users can view various Telegram groups, sales, and offers.',
    supportTitle: 'Support',
    supportText: 'ЁЯТм WhatsApp: <a href="#" target="_blank" style="color:#0b63d6;text-decoration:none;">Click here</a><br>тЬЙя╕П Email: <a href="mailto:support@example.com" style="color:#0b63d6;text-decoration:none;">support@example.com</a><br>ЁЯУ▒ Telegram: <a href="#" target="_blank" style="color:#0b63d6;text-decoration:none;">Click here</a>',
    footerText: 'Telegram Market | All rights reserved.',
    reviewsTitle: 'Realistic Reviews',
    offersTitle: '18+ Sales & Offers',
    searchInput: 'Search for group...',
    showMoreBtn: 'Show More',
    historyTitle: 'Purchase History',
    noHistoryText: 'You have no purchase history.',
    paymentTitle: 'ЁЯТ│ Payment Interface',
    paymentInstruction: 'Bkash / Nagad тАФ Send money to this number and fill out the form below to submit.',
    tgNote: 'Provide the Telegram username of the account to be added',
    groupLabel: 'Group:',
    priceLabel: 'Price:',
    currency: 'BDT',
    payNamePlaceholder: 'Your Name',
    payTgUsernamePlaceholder: 'Telegram Username (@username)',
    payAmountPlaceholder: 'Amount',
    payTrxPlaceholder: 'Transaction ID',
    submitPaymentBtn: 'тЬЕ Submit Payment',
    processingBtn: 'Processing...',
    successTitle: 'ЁЯОЙ Application Complete!',
    successText: 'Your application has been received тАФ the link will be sent after verification. Thank you ЁЯШК',
    backBtnText: 'Back',
    backToHomeBtnText: 'Back to Home',
    notAddedBtnText: 'Not Added Yet'
  }
};
let currentLang = 'bn';

/* ==========================
   Navigation Logic (Simplified and Fixed)
   ========================== */
const VIEWS = ['tgMarket', 'slide1', 'slide2', 'slide3', 'paymentSlide', 'successSlide'];
let historyStack = [];

function showView(viewId) {
    // Hide all views first
    VIEWS.forEach(v => {
        const el = document.getElementById(v);
        if (el) el.style.display = 'none';
    });
    // Show the target view
    const targetEl = document.getElementById(viewId);
    if (targetEl) {
        targetEl.style.display = 'block';
    }
}

function navigateTo(viewId) {
    if (historyStack.length === 0 || historyStack[historyStack.length - 1] !== viewId) {
        historyStack.push(viewId);
    }
    showView(viewId);
}

function goBack() {
    if (historyStack.length > 1) {
        historyStack.pop();
        const prevViewId = historyStack[historyStack.length - 1];
        showView(prevViewId);
    } else {
        // If on the first page, just stay there
        showView('tgMarket');
    }
}

// Handle native back button for mobile
window.addEventListener('popstate', (event) => {
    // Check if there's a view in the custom stack to go back to
    if (historyStack.length > 1) {
        historyStack.pop();
        const prevViewId = historyStack[historyStack.length - 1];
        showView(prevViewId);
    } else {
        showView('tgMarket');
    }
});

function setLanguage(lang) {
  currentLang = lang;
  const data = langData[lang];
  document.documentElement.lang = lang;
  document.getElementById('mainTitle').innerText = data.mainTitle;
  document.getElementById('leadText').innerText = data.leadText;
  document.getElementById('btnOffers').innerText = data.btnOffers;
  document.getElementById('btnReviews').innerText = data.btnReviews;
  document.getElementById('btnHistory').innerText = data.btnHistory;
  document.getElementById('userCountLabel').innerText = data.userCountLabel;
  document.getElementById('aboutTitle').innerText = data.aboutTitle;
  document.getElementById('aboutText').innerText = data.aboutText;
  document.getElementById('supportTitle').innerText = data.supportTitle;
  document.getElementById('supportText').innerHTML = data.supportText;
  document.getElementById('footerText').innerText = data.footerText;
  document.getElementById('reviewsTitle').innerText = data.reviewsTitle;
  document.getElementById('offersTitle').innerText = data.offersTitle;
  document.getElementById('searchInput').placeholder = data.searchInput;
  document.getElementById('showMoreBtn').innerText = data.showMoreBtn;
  document.getElementById('historyTitle').innerText = data.historyTitle;
  document.getElementById('noHistoryText').innerText = data.noHistoryText;
  document.getElementById('paymentTitle').innerText = data.paymentTitle;
  document.getElementById('paymentInstruction').innerText = data.paymentInstruction;
  document.getElementById('tgNote').innerText = data.tgNote;
  document.getElementById('groupLabel').innerText = data.groupLabel;
  document.getElementById('priceLabel').innerText = data.priceLabel;
  document.getElementById('currency').innerText = data.currency;
  document.getElementById('pay_name').placeholder = data.payNamePlaceholder;
  document.getElementById('pay_tg_username').placeholder = data.payTgUsernamePlaceholder;
  document.getElementById('pay_amount').placeholder = data.payAmountPlaceholder;
  document.getElementById('pay_trx').placeholder = data.payTrxPlaceholder;
  document.getElementById('submitPaymentBtn').innerText = data.submitPaymentBtn;
  document.getElementById('successTitle').innerText = data.successTitle;
  document.getElementById('successText').innerText = data.successText;
  document.querySelectorAll('.backBtnText').forEach(el => el.innerText = data.backBtnText);
  document.querySelectorAll('.backToHomeBtnText').forEach(el => el.innerText = data.backToHomeBtnText);
}

/* ================
   Render Reviews
   ================ */
function renderReviews(){
  const container = document.getElementById('slide1Content');
  container.innerHTML = '';
  reviews.forEach(r => {
    const div = document.createElement('div');
    div.className = 'listItem';
    const img = document.createElement('img'); img.src = r.avatar; img.className='avatar';
    const txt = document.createElement('div');
    txt.innerHTML = `<b style="color:#222;">${escapeHtml(r.user)}</b><div style="font-size:14px;color:#555;margin-top:6px;">${escapeHtml(r.msg)}</div>`;
    div.appendChild(img); div.appendChild(txt);
    container.appendChild(div);
  });
}

/* ================
   Render Offers / Search
   ================ */
const itemsPerPage = 10;
let currentPage = 0;

function renderOffers(list){
  const container = document.getElementById('slide2Content');
  const showMoreBtn = document.getElementById('showMoreBtn');
  container.innerHTML = '';
  currentPage = 0;
  
  function renderPage(pageNumber){
    const start = pageNumber * itemsPerPage;
    const end = start + itemsPerPage;
    const pageItems = list.slice(start, end);
    pageItems.forEach(item => {
      const row = document.createElement('div');
      row.style = "margin:16px 0;padding:16px;border:1px solid #e0f0ff;border-radius:16px;display:flex;justify-content:space-between;align-items:center;background:#f8fcff;";
      const left = document.createElement('div');
      left.innerHTML = `<div style="font-weight:700">${escapeHtml(item.name)} <span style="background:#0b63d6;color:#fff;padding:4px 8px;border-radius:8px;font-size:12px;margin-left:8px;">ЁЯТ▓${item.price}</span></div>
                        <div style="font-size:14px;color:#555;margin-top:8px;">${escapeHtml(item.note)}</div>`;
      
      const btnContainer = document.createElement('div');
      btnContainer.style = "display:flex;gap:10px;";

      const demoBtn = document.createElement('a');
      demoBtn.className = 'smallBtn';
      demoBtn.style = "padding:10px 14px;border-radius:10px;background:#f0f7ff;color:#0b63d6;text-decoration:none;font-weight:700;border:1px solid #d4e8ff;transition:transform 0.2s ease;";
      demoBtn.textContent = 'ЁЯСБя╕П Demo';
      demoBtn.href = item.demoLink;
      demoBtn.target = '_blank';
      
      const buyBtn = document.createElement('button');
      buyBtn.className = 'smallBtn';
      buyBtn.style = "padding:10px 14px;border-radius:10px;background:#00c6ff;color:#fff;border:none;cursor:pointer;font-weight:700;transition:transform 0.2s ease;box-shadow:0 4px 8px rgba(0, 198, 255, 0.2);";
      buyBtn.textContent = 'ЁЯТ╕ Buy Now';
      buyBtn.addEventListener('click', () => buyItem(item));
      
      demoBtn.addEventListener('mouseenter', () => demoBtn.style.transform = 'translateY(-2px)');
      demoBtn.addEventListener('mouseleave', () => demoBtn.style.transform = 'translateY(0)');
      buyBtn.addEventListener('mouseenter', () => buyBtn.style.transform = 'translateY(-2px)');
      buyBtn.addEventListener('mouseleave', () => buyBtn.style.transform = 'translateY(0)');

      btnContainer.appendChild(demoBtn);
      btnContainer.appendChild(buyBtn);

      row.appendChild(left);
      row.appendChild(btnContainer);
      container.appendChild(row);
    });
    
    if (end < list.length) {
      showMoreBtn.style.display = 'block';
    } else {
      showMoreBtn.style.display = 'none';
    }
  }
  
  showMoreBtn.onclick = function(){
    currentPage++;
    renderPage(currentPage);
  };
  
  renderPage(currentPage);
}

document.getElementById('searchInput').addEventListener('input', function(){
  const q = this.value.trim().toLowerCase();
  const filtered = slide2Data.filter(it => it.name.toLowerCase().includes(q) || it.note.toLowerCase().includes(q));
  renderOffers(filtered);
});

/* ================
   Buy -> Payment
   ================ */
function buyItem(item){
  document.getElementById('payGroupName').innerText = item.name;
  document.getElementById('payGroupPrice').innerText = item.price;
  document.getElementById('pay_name').value = '';
  document.getElementById('pay_tg_username').value = '';
  document.getElementById('pay_amount').value = item.price;
  document.getElementById('pay_trx').value = '';
  
  const purchaseTime = new Date().toLocaleString(currentLang === 'bn' ? 'bn-BD' : 'en-US', {
    year: 'numeric', month: 'long', day: 'numeric',
    hour: '2-digit', minute: '2-digit', second: '2-digit',
    hour12: true
  });
  
  const purchase = {
    name: item.name,
    price: item.price,
    time: purchaseTime,
    id: Date.now()
  };
  
  purchasedHistory.push(purchase);
  localStorage.setItem('purchasedHistory', JSON.stringify(purchasedHistory));

  navigateTo('paymentSlide');
}

/* ================
   Render History
   ================ */
function renderHistory(){
  const container = document.getElementById('slide3Content');
  const noHistoryText = document.getElementById('noHistoryText');
  container.innerHTML = '';

  if (purchasedHistory.length === 0) {
    noHistoryText.style.display = 'block';
    return;
  }
  
  noHistoryText.style.display = 'none';
  purchasedHistory.forEach(item => {
    const div = document.createElement('div');
    div.className = 'listItem';
    
    const info = document.createElement('div');
    info.style = 'flex-grow:1;';
    info.innerHTML = `<b style="color:#222;">${escapeHtml(item.name)}</b>
                      <div style="font-size:14px;color:#555;margin-top:4px;">${langData[currentLang].priceLabel} ${item.price} ${langData[currentLang].currency}</div>
                      <div style="font-size:12px;color:#777;margin-top:2px;">${item.time}</div>`;
    
    const supportBtn = document.createElement('a');
    supportBtn.className = 'smallBtn btn ghost';
    supportBtn.style = 'padding:8px 12px; border:1px solid #d4e8ff; text-decoration:none; margin-top: auto; white-space:nowrap;';
    supportBtn.href = TELEGRAM_SUPPORT_LINK;
    supportBtn.target = '_blank';
    supportBtn.textContent = langData[currentLang].notAddedBtnText;
    
    div.appendChild(info);
    div.appendChild(supportBtn);
    container.appendChild(div);
  });
}

/* ================
   Payment submit -> send to Telegram (via PROXY or DIRECT)
   ================ */
function escapeHtml(s){
  if (!s && s !== 0) return '';
  return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
}

function sendToTelegramServer(payload){
  return new Promise((resolve, reject) => {
    if (PROXY_URL){
      fetch(PROXY_URL, {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(payload)
      }).then(r => r.json ? r.json() : r.text()).then(data => resolve(data)).catch(err => reject(err));
      return;
    }
    if (BOT_TOKEN && CHAT_ID){
      const lines = [
        "ЁЯУж ржирждрзБржи ржкрзЗржорзЗржирзНржЯ ржЖржмрзЗржжржи",
        "ЁЯСд ржирж╛ржо: " + escapeHtml(payload.name),
        "ЁЯТм ржЗржЙржЬрж╛рж░ржирзЗржо: " + escapeHtml(payload.telegram_username),
        "ЁЯТ░ ржкрж░рж┐ржорж╛ржг: " + escapeHtml(payload.amount),
        "ЁЯФС ржЯрзНрж░рж╛ржиржЬрзЗржХрж╢ржи: " + escapeHtml(payload.trx),
        "ЁЯСе ржЧрзНрж░рзБржк: " + escapeHtml(payload.groupName)
      ];
      const textHtml = "<pre>"+escapeHtml(lines.join("\n"))+"</pre>";
      fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify({chat_id: CHAT_ID, text: textHtml, parse_mode: 'HTML'})
      }).then(r => r.json()).then(data => {
        if (data && data.ok) resolve(data);
        else reject(data);
      }).catch(err => reject(err));
      return;
    }
    reject(new Error('No PROXY_URL or BOT_TOKEN configured.'));
  });
}

/* Payment form handling */
document.getElementById('paymentForm').addEventListener('submit', function(e){
  e.preventDefault();
  const name = document.getElementById('pay_name').value.trim();
  const telegram_username = document.getElementById('pay_tg_username').value.trim();
  const amount = document.getElementById('pay_amount').value.trim();
  const trx = document.getElementById('pay_trx').value.trim();
  const groupName = document.getElementById('payGroupName').innerText;

  const payload = {name, telegram_username, amount, trx, groupName};

  const submitBtn = this.querySelector('button[type="submit"]');
  submitBtn.disabled = true;
  submitBtn.textContent = langData[currentLang].processingBtn;

  sendToTelegramServer(payload).then(res => {
    document.getElementById('successText').innerText = langData[currentLang].successText;
    navigateTo('successSlide');
  }).catch(err => {
    console.error('Send error:', err);
    alert('ржкрзЗржорзЗржирзНржЯ ржбрзЗржЯрж╛ ржЯрзЗрж▓рж┐ржЧрзНрж░рж╛ржорзЗ ржкрж╛ржарж╛рждрзЗ рж╕ржорж╕рзНржпрж╛ рж╣рзЯрзЗржЫрзЗред\nError: ' + (err.message || JSON.stringify(err)));
  }).finally(()=> {
    submitBtn.disabled = false;
    submitBtn.textContent = langData[currentLang].submitPaymentBtn;
  });
});

/* ================
   Buttons & Back handlers
   ================ */
document.getElementById('btnReviews').addEventListener('click', () => {
  renderReviews();
  navigateTo('slide1');
});
document.getElementById('btnOffers').addEventListener('click', () => {
  renderOffers(slide2Data);
  navigateTo('slide2');
});
document.getElementById('btnHistory').addEventListener('click', () => {
  renderHistory();
  navigateTo('slide3');
});

document.getElementById('btnLangBn').addEventListener('click', () => setLanguage('bn'));
document.getElementById('btnLangEn').addEventListener('click', () => setLanguage('en'));

document.getElementById('back1').addEventListener('click', goBack);
document.getElementById('back2').addEventListener('click', goBack);
document.getElementById('back3').addEventListener('click', goBack);
document.getElementById('back5').addEventListener('click', goBack);
document.getElementById('back4').addEventListener('click', () => {
    historyStack = ['tgMarket']; // Clear stack and go to home
    showView('tgMarket');
});

/* ================
   User Counter (box) auto-increment
   ================ */
let userCount = 10000;
const counterEl = document.getElementById('userCount');

const savedCount = localStorage.getItem('userCount');
if (savedCount) {
    userCount = parseInt(savedCount, 10);
}

counterEl.innerText = userCount.toLocaleString();

function updateCounter() {
    const increase = Math.floor(Math.random() * 7) + 2;
    userCount += increase;
    counterEl.innerText = userCount.toLocaleString();
    localStorage.setItem('userCount', userCount);
}

setInterval(updateCounter, 4500);

/* ================
   Init: show home
   ================ */
setLanguage('bn');
// Initialize the history stack with the home view
historyStack.push('tgMarket');
showView('tgMarket');
</script>
</body>
</html>
